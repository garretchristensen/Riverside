x<-3
install.packages("maps")
install.packages("ggplot2")
###importing data
library(xlsx)
data <- read.xlsx(file = "/Users/Courtney/Desktop/Toy_Example/study2_raw data.xlsx", sheetName = "Sheet1", as.data.frame = TRUE, header = TRUE)
###creating dependent variable (the mean number of correct questions)
data$correct <- rowMeans(subset(data, select=math1:math12))
###calculating math_id variable
data$math_id <- rowMeans(subset(data, select=math_id1:math_id2))
###centering math_id variable
data$math_id_c <- data$math_id - mean(data$math_id)
##contrast coding cond variable so that I can get the effect of identificaiton across both levels
data$cond.f <- as.factor(data$cond)
contrasts(data$cond.f) = contr.sum(2)
##run regression model
regression <- lm(correct ~ cond.f + math_id_c + cond.f:math_id_c, data = data)
summary(regression)
library(effects)
plot(effect("cond.f:math_id_c", regression, xlevels = list(cond=c('control', 'female'))), multiline = T)
sd(data$math_id_c)
result <- t.test(data$correct ~ data$cond.f, paired = FALSE, alternative = "two.sided", var.equal = TRUE, conf.level = .95)
library(plyr)
output <- ddply(data, ~cond.f, summarize, mean = mean(correct), sd = sd(correct), var = var(correct), freq = length(correct))
library(MBESS)
ci.smd(ncp = .7215, n.1 = 35, n.2 = 35, conf.level = .95)
data$sas_2 <- ifelse(data$sas_2 == 'a', 1, 0)
data$sas_2.f <- as.factor(data$sas_2)
regression <- lm(correct ~ cond.f*math_id_c*sas_2.f, data = data)
summary(regression)
###importing data
library(xlsx)
data <- read.xlsx(file = "/Users/garret/Documents/Research/BITSS/COS/NewPresentation/study2_raw data.xlsx", sheetName = "Sheet1", as.data.frame = TRUE, header = TRUE)
###creating dependent variable (the mean number of correct questions)
data$correct <- rowMeans(subset(data, select=math1:math12))
###calculating math_id variable
data$math_id <- rowMeans(subset(data, select=math_id1:math_id2))
###centering math_id variable
data$math_id_c <- data$math_id - mean(data$math_id)
##contrast coding cond variable so that I can get the effect of identificaiton across both levels
data$cond.f <- as.factor(data$cond)
contrasts(data$cond.f) = contr.sum(2)
##run regression model
regression <- lm(correct ~ cond.f + math_id_c + cond.f:math_id_c, data = data)
summary(regression)
library(effects)
plot(effect("cond.f:math_id_c", regression, xlevels = list(cond=c('control', 'female'))), multiline = T)
sd(data$math_id_c)
result <- t.test(data$correct ~ data$cond.f, paired = FALSE, alternative = "two.sided", var.equal = TRUE, conf.level = .95)
library(plyr)
output <- ddply(data, ~cond.f, summarize, mean = mean(correct), sd = sd(correct), var = var(correct), freq = length(correct))
library(MBESS)
ci.smd(ncp = .7215, n.1 = 35, n.2 = 35, conf.level = .95)
data$sas_2 <- ifelse(data$sas_2 == 'a', 1, 0)
data$sas_2.f <- as.factor(data$sas_2)
regression <- lm(correct ~ cond.f*math_id_c*sas_2.f, data = data)
summary(regression)
###importing data
library(xlsx)
data <- read.xlsx(file = "/Users/garret/Documents/Research/BITSS/COS/NewPresentation/study2_raw data.xlsx", sheetName = "Sheet1", as.data.frame = TRUE, header = TRUE)
###creating dependent variable (the mean number of correct questions)
data$correct <- rowMeans(subset(data, select=math1:math12))
###calculating math_id variable
data$math_id <- rowMeans(subset(data, select=math_id1:math_id2))
###centering math_id variable
data$math_id_c <- data$math_id - mean(data$math_id)
##contrast coding cond variable so that I can get the effect of identificaiton across both levels
data$cond.f <- as.factor(data$cond)
contrasts(data$cond.f) = contr.sum(2)
##run regression model
regression <- lm(correct ~ cond.f + math_id_c + cond.f:math_id_c, data = data)
summary(regression)
library(effects)
plot(effect("cond.f:math_id_c", regression, xlevels = list(cond=c('control', 'female'))), multiline = T)
sd(data$math_id_c)
result <- t.test(data$correct ~ data$cond.f, paired = FALSE, alternative = "two.sided", var.equal = TRUE, conf.level = .95)
library(plyr)
output <- ddply(data, ~cond.f, summarize, mean = mean(correct), sd = sd(correct), var = var(correct), freq = length(correct))
library(MBESS)
ci.smd(ncp = .7215, n.1 = 35, n.2 = 35, conf.level = .95)
data$sas_2 <- ifelse(data$sas_2 == 'a', 1, 0)
data$sas_2.f <- as.factor(data$sas_2)
regression <- lm(correct ~ cond.f*math_id_c*sas_2.f, data = data)
summary(regression)
###importing data
library(xlsx)
data <- read.xlsx(file = "/Users/garret/Documents/Research/BITSS/COS/NewPresentation/study2_raw data.xlsx", sheetName = "Sheet1", as.data.frame = TRUE, header = TRUE)
###creating dependent variable (the mean number of correct questions)
data$correct <- rowMeans(subset(data, select=math1:math12))
###calculating math_id variable
data$math_id <- rowMeans(subset(data, select=math_id1:math_id2))
###centering math_id variable
data$math_id_c <- data$math_id - mean(data$math_id)
##contrast coding cond variable so that I can get the effect of identificaiton across both levels
data$cond.f <- as.factor(data$cond)
contrasts(data$cond.f) = contr.sum(2)
##run regression model
regression <- lm(correct ~ cond.f + math_id_c + cond.f:math_id_c, data = data)
summary(regression)
library(effects)
plot(effect("cond.f:math_id_c", regression, xlevels = list(cond=c('control', 'female'))), multiline = T)
sd(data$math_id_c)
result <- t.test(data$correct ~ data$cond.f, paired = FALSE, alternative = "two.sided", var.equal = TRUE, conf.level = .95)
library(plyr)
output <- ddply(data, ~cond.f, summarize, mean = mean(correct), sd = sd(correct), var = var(correct), freq = length(correct))
library(MBESS)
ci.smd(ncp = .7215, n.1 = 35, n.2 = 35, conf.level = .95)
data$sas_2 <- ifelse(data$sas_2 == 'a', 1, 0)
data$sas_2.f <- as.factor(data$sas_2)
regression <- lm(correct ~ cond.f*math_id_c*sas_2.f, data = data)
summary(regression)
clear
###importing data
library(xlsx)
data <- read.xlsx(file = "/Users/garret/Documents/Research/BITSS/COS/NewPresentation/study2_raw data.xlsx", sheetName = "Sheet1", as.data.frame = TRUE, header = TRUE)
install.packages("xlsx")
###importing data
library(xlsx)
data <- read.xlsx(file = "/Users/garret/Documents/Research/BITSS/COS/NewPresentation/study2_raw data.xlsx", sheetName = "Sheet1", as.data.frame = TRUE, header = TRUE)
install.packages(rJava)
install.packages("rJava")
library(xlsx)
data <- read.xlsx(file = "/Users/garret/Documents/Research/BITSS/COS/NewPresentation/study2_raw data.xlsx", sheetName = "Sheet1", as.data.frame = TRUE, header = TRUE)
library(xlsx)
data <- read.xlsx(file = "/Users/garret/Documents/Research/BITSS/COS/NewPresentation/study2_raw data.xlsx", sheetName = "Sheet1", as.data.frame = TRUE, header = TRUE)
###importing data
library(xlsx)
install.packages(xlsx)
install.packages("xlsx")
install.packages("ggplot2")
library(xlsx)
install.packages{"lmtest"}
install.packages("lmtest")
stargazer(model1, model2, model3, se=list(NULL, robust.se, NULL), type="html", out="outputR.html", title="Results", align=TRUE)
library(stargazer)
stargazer(model1, model2, model3, se=list(NULL, robust.se, NULL), type="html", out="outputR.html", title="Results", align=TRUE)
```{r}
#install.packages("foreign")
library(foreign)
setwd ("C:/Users/garret/Documents/Research/BITSS/WorkshopSlides/Riverside")
WASHB<-read.dta("WASHBpublic_mock.dta")
```
#install.packages("foreign")
library(foreign)
setwd ("C:/Users/garret/Documents/Research/BITSS/WorkshopSlides/Riverside")
WASHB<-read.dta("WASHBpublic_mock.dta")
#Model 1=simple model
model1<-lm(free_chl_yn~treatw, data=WASHB)
#Model 2=with hetero-robust se's--a bit more complicated than Stata
#install.packages("sandwich")
library(sandwich)
cov <- vcovHC(model1, type = "HC")
robust.se <- sqrt(diag(cov))
#Model 3=add baseline control variables
model3<-lm(free_chl_yn~treatw+kiswahili, data=WASHB)
library(stargazer)
stargazer(model1, model2, model3, se=list(NULL, robust.se, NULL), title="Results", out="outputR.tex", align=TRUE)
library(stargazer)
stargazer(model1, model1, model3, se=list(NULL, robust.se, NULL), title="Results", out="outputR.tex", align=TRUE)
head(WASHB)
mean(free_chl_yn$WASHB)
mean(WASHB$free_chl_yn)
mean(WASHB$free_chl_yn, NA=FALSE)
